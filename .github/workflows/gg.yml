name: commentcheck
on:
  issue_comment:
    types: [created, edited, deleted]

jobs:
 job01:
    if: contains(github.event.comment.html_url, '/pull/') && contains(github.event.comment.body, 'commenttest')
    runs-on: [ubuntu-latest]
    steps:
      - name: Dump GitHub context
        env:
          GITHUB_CONTEXT: ${{ toJson(github) }}
        run: echo "$GITHUB_CONTEXT"



      - name: Report failure
        run: |
          curl --request POST \
          --url https://api.github.com/repos/OWNER/REPO/statuses/${{ sha }} \
          --header 'authorization: token ${{ secrets.PAT }}' \
          --header 'content-type: application/json' \
          --data '{"state": "failure","target_url": "https://example.com/build/status","description": "The tests failed!","context": "ci/tests"}'
        if: failure()
